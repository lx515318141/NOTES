简历系列
本系列博客注意记录编写本次简历项目时遇到的一些问题，解决办法，以及使用到的一些工具和方法。

简历系列——关于页面中的距离关系
本篇博客会整理一些编写本次项目时关于元素、页面、视口三者之间的距离关系。
在本次项目中多次使用了元素与视口距离的关系，作为执行js的判断条件，如：当元素顶部超过视口二分之一时，顶部导航栏对应的模块名出现下划线，以及元素顶部超过视口底部100px元素执行上浮动画效果等。这些都需要对元素与视口以及页面顶部三种之间的距离关系进行分析以及处理，下面整理一些本次用到的求三者之间距离关系的api和思路。
获取元素到视口顶部的距离
最开始我采用的方法是先获取元素到页面顶部的距离，再获取视口划过的距离，即视口顶部到页面顶部的距离，再用前者减去后者，就可以得到元素到视口顶部的距离。

开始我使用 offsetTop 这个方法获取元素到页面顶部的距离，但是后面出现了问题，因为 offsetTop 并不是直接获取元素到页面顶部的距离，而是获取元素到 offsetParent 顶部的距离。
而 offsetParent 是指距离元素最近的一个具有定位的祖宗元素（relative，absolute，fixed），若祖宗都不符合条件，offsetParent为body。因为我要进行判断的元素的祖先元素恰好存在具有定位，所有导致我无法获取的元素到页面顶部的距离。而且知道注意的是，只有元素show（渲染完成）才会计算入offsetTop，若是中间有元素数据需要异步获取，会导致最终获取的offsetTop值偏小。这样就很不好用

后来我改用 offset()。
$(selector).offset() 方法返回或设置匹配元素相对于文档的偏移（位置）。
该方法返回的对象包含两个整型属性：top 和 left，以像素计。此方法只对可见元素有效。此方法可以不受祖先元素定位限制。
$(selector).offset().top; // 得到该元素顶端距离页面顶端的距离top。
接续了需要获取视口划过页面的距离。

我使用scrollTop()来获取视口划过页面的距离
$(selector).scrollTop(offset); // 方法返回或设置匹配元素的滚动条的垂直位置。
offset：可选。规定相对滚动条顶部的偏移，以像素计。
当selector使用widow时就可以获取到整个页面划过的距离。
此时用元素到页面顶部的距离 - 页面划过的距离，就可以获取到元素到视口顶部的距离了。

此外我还需要获取元素顶部距离视口底部的距离，此时我使用了 $(window).height()
$(window).height()代表了当前可见区域的大小，
$(document).height()则代表了整个文档的高度，可视具体情况使用.
此时再用$(window).height() - 元素到视口顶部的距离，就可以获得元素到视口底部的距离了。

但是此方法有些麻烦，是否可以有一种更简洁的方法呢，后来通过查找我找到了另一个方法，element.getBoundingClientRect().top。
element.getBoundingClientRect(); // 方法返回元素的大小及其相对于视口的位置。
这个方法返回一个矩形对象，包含四个属性：left、top、right和bottom。分别表示元素各边与页面上边和左边的距离。
如下图：
使用方法：
element.getBoundingClientRect().top; // 元素上边距离页面上边的距离
element.getBoundingClientRect().right; // 元素右边距离页面左边的距离
element.getBoundingClientRect().bottom; // 元素下边距离页面上边的距离
element.getBoundingClientRect().left; // 元素左边距离页面左边的距离
注意：IE、Firefox3+、Opera9.5、Chrome、Safari支持，在IE中，默认坐标从(2,2)开始计算，导致最终距离比其他浏览器多出两个像素，我们需要做个兼容。

这样就可以直接获取到元素到页面顶部的距离了。而元素顶部到视口底部的距离可以用$(window).height() - element.getBoundingClientRect().top